
<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>WMS</title>

	<link href="http://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css"> <!-- jquery Used --> 
	<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">

	<link rel="stylesheet" href="/css/dashboard.css">

	<script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script>
	<script src="/js/jquery.circleGraphic.js" type="text/javascript"></script>
		
</head>

<body>
	<% let db=JSON.parse(data) %>
	#Logout_Button
	<div >
		<nav>
			<input type="checkbox" id="check">
			<label for="check" class="checkbtn">
			  <i class="las la-bars"></i>
			</label>
			<label for="logo" class="logo"><a href="/" style="text-decoration: none;">WMS</a></label>
			<ul>
			  <li><a style="text-decoration: none; color: #fff;"  onclick="logout()" >Logout</a></li>
			  
			</ul>
		  </nav>
		<ul>
			<!-- #Graphics Circle Used -->
			<div class="row">
				<div class="d-none d-md-block col-lg-1"></div>
				<div class="d-none d-md-block col-lg-2">
					<li class="circleGraphic1">9</li>
				</div>
				<div class="d-none d-md-block col-lg-2">
					<li class="circleGraphic2">30</li>
				</div>
				<div class="d-none d-md-block col-lg-2">
					<li class="circleGraphic3">50</li>
				</div>
				<div class="d-none d-md-block col-lg-2">
					<li class="circleGraphic4">70</li>
				</div>
				<div class="d-none d-md-block col-lg-2">
					<li class="circleGraphic5">100</li>
				</div>
				<div class="d-none d-md-block col-lg-1"></div>
			</div>		
		</ul>
		<ul>
			<!-- Task List Added -->
			<div class="row">
				<div class="d-none d-md-block col-lg-1"></div>
				<div class="d-none d-md-block col-lg-2">
					<li>
						<div class="circle div" id="circle1"></div>
						<br>
						<div class="div">
							<p>Idea Submission</p>
							<p>for Approval</p><br>
						</div>
					</li>
				</div>
				<div class="d-none d-md-block col-lg-2">
					<li>
						<div class="circle div" id="circle2"></div><br>
						<div class="div">
							<p>Approved? Create a</p>
							<p>Project Template</p><br>
						</div>
					</li>
				</div>
				<div class="d-none d-md-block col-lg-2">
					<li>
						<div class="circle div" id="circle3"></div><br>
						<div class="div">
							<p>Assign Activities to</p>
							<p>team members</p><br>
						</div class="div">
					</li>
				</div>
				<div class="d-none d-md-block col-lg-2">
					<li>
						<div class="circle div" id="circle4"></div><br>
						<div class="div">
								<p>Access to project</p>
								<p>Workspace</p><br>
						</div>
					</li>
				</div>
				<div class="d-none d-md-block col-lg-2">
					<li>
						<div class="cir div" id="circle5"></div><br>
						<div class="div">
							<p>Project Review &</p>
							<p>Approval</p><br>
						</div>
					</li>
				</div>
				<div class="d-none d-md-block col-lg-1"></div>
			</div>
		</ul>
	</div>
	<br>

	<!-- Table Created......Card containing all the items from Firebase -->
	<div class="card">
		<div class="header row">
			<div class="col-md-8 col-6 p-3">
				<h5 id="project" class="p-3" > Projects </h5>
			</div>
			<div class="col-md-2 col-3 p-3">
				<a id="cp" href="/project/createproject" class="btn btn-success btn-lg">Create Project</a>
			</div>
			<div class="col-md-2 col-3 p-3">
				<div class="container-fluid h-100">
					<div class="d-flex justify-content-center h-100">
						<div class="searchbar">
							<input class="search_input" type="text" id="search" placeholder="Search..." name="">
							<a class="search_icon"><i class="fa fa-search"></i></a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<hr>
		<div class="row">
			<div class="col-12">
		<table id="dashboarddetails" class="table table-hover table-striped">
			<thead class="thead-dark">
				<tr>
					<!-- Workspace Details shown here -->
					<th scope="col" style="text-align: center;">S No.</th>
					<th scope="col" style="text-align: center;">Project Title</th>
					<th class="d-none d-md-table-cell" scope="col" style="text-align: center;">Start Date</th>
					<th class="d-none d-md-table-cell" scope="col" style="text-align: center;">Project Status</th>
					<th class="d-none d-md-table-cell" scope="col" style="text-align: center;">Role</th>
					<th scope="col" style="text-align: center;">Workspace</th>
				</tr>
			</thead>
			<tbody>
				<% for( let i = 0; i < db.length; i++ ) { %>
					<% if(db[i].show) { %>
					<tr style="text-align: center;">
						<th scope="row"><%= i+1 %></th>
						<td class="pname"><%= db[i].name %></td>
						<td class="d-none d-md-table-cell"><%= db[i].date %></td>
						<td class="d-none d-md-table-cell">In Progress</td>
						<td class="d-none d-md-table-cell"><%= db[i].role %></td>
						<% if (db[i].submitted) { %>
							<td><a style="font-family:Georgia, 'Times New Roman', Times, serif; font-weight: bold;" class="button" href="/project/<%= db[i].id%>">Go To WorkSpace</a></td>
						<% }else{ %>
							<td><a style="font-family:Georgia, 'Times New Roman', Times, serif; font-weight: bold;" class="button" href="/project/<%= db[i].id%>/edit">Go To WorkSpace</a></td>
						<% } %>	
					</tr>

				<% } %>	
				<% } %>	

			</tbody>
		</table>
	</div>
	</div>
	</div>
	<script>

		// JS Logout Function For Current User
		function logout() {

		var request=new XMLHttpRequest()
		request.open("POST", "/logout");
		request.setRequestHeader("Content-Type","application/json")
		request.send()
		request.onreadystatechange = function () {
	  if(request.readyState === XMLHttpRequest.DONE) {
		  var status = request.status;
		  if (status === 0 || (status >= 200 && status < 400)) {
			  window.location=(request.responseText)
		  }else {
				alert(request.responseText)
			}
	  }
  }

		

		// Search Function used for searchbar used abhove 
		// Search function is used for searching the details of a particular
		// project which is registered in the database and shortlist alphabetically
		
		}
	</script>
	<script type="text/javascript">
		window.onload = function () {
			$("#search").on("keyup", function() {
				var value = $(this).val().toLowerCase();
				$("#dashboarddetails tbody tr").filter(function() {
					$(this).toggle($(this).children(".pname").text().toLowerCase().indexOf(value) > -1)
				});
			});

			$('.circleGraphic1').circleGraphic({ 'color': '#fa3734' });
			$('.circleGraphic2').circleGraphic({ 'color': '#f7a900' });
			$('.circleGraphic3').circleGraphic({ 'color': '#1c5e1f' });
			$('.circleGraphic4').circleGraphic({ 'color': '#1b2759' });
			$('.circleGraphic5').circleGraphic({ 'color': '#611dad' });
		}
	</script>	
</body>


<!-- <head> -->
	<!-- <meta charset="utf-8"> -->
	<!-- <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> -->
	<!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
	<!-- <title>WMS</title> -->

	<!-- <link href="http://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css"> jquery Used  -->
	<!-- <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500&display=swap" rel="stylesheet"> -->
	<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"> -->
	<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> -->
	<!-- <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css"> -->

	<!-- <link rel="stylesheet" href="/css/dashboard.css"> -->

	<!-- <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script> -->
	<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script> -->
	<!-- <script src="/js/jquery.circleGraphic.js" type="text/javascript"></script> -->
		
<!-- </head> -->